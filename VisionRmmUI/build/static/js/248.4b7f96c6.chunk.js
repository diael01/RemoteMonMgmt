"use strict";(self.webpackChunkVisionRmm=self.webpackChunkVisionRmm||[]).push([[248],{6248:function(e,t,n){n.r(t);var i=n(7433),r=n(184);t.default=function(){return(0,r.jsx)(i.Z,{mode:"ADD"})}},7433:function(e,t,n){n.d(t,{Z:function(){return N}});var i=n(5861),r=n(9439),a=n(4687),c=n.n(a),s=n(98),d=n(3263),l=n(9570),u=n(5058),o=n(2791),m=n(6871),f=n(1166),p=n(8470),v=n(8456),h=n(2626),g=n(6106),x=n(914),Z=n(7888),D=n(376),T=n(184),j={name:[{required:!0,message:"Please enter Device name"}],ip:[{required:!0,message:"Please enter Device ip"}],clientId:[{required:!0,message:"Please enter Device clientId"}],type:[{required:!0,message:"Please enter Device type"}]},I=function(e){return(0,T.jsx)(g.Z,{gutter:16,children:(0,T.jsx)(x.Z,{xs:24,sm:24,md:17,children:(0,T.jsxs)(Z.Z,{title:"Basic Info",children:[(0,T.jsx)(s.Z.Item,{name:"name",label:"Device name",rules:j.name,children:(0,T.jsx)(D.Z,{placeholder:"Device Name"})}),(0,T.jsx)(s.Z.Item,{name:"ip",label:"Device Ip",rules:j.ip,children:(0,T.jsx)(D.Z,{placeholder:"Device Ip"})}),(0,T.jsx)(s.Z.Item,{name:"clientId",label:"Client Id",rules:j.clientId,children:(0,T.jsx)(D.Z,{placeholder:"Client Id"})}),(0,T.jsx)(s.Z.Item,{name:"type",label:"Type",rules:j.type,children:(0,T.jsx)(D.Z.TextArea,{rows:2})}),(0,T.jsx)(s.Z.Item,{name:"id",hidden:"true"})]})})})},y="EDIT",N=function(e){(0,m.s0)();var t=(0,v.Dz)(),n=t.data,a=(t.status,t.isSuccess,(0,o.useState)(n)),g=(0,r.Z)(a,2),x=g[0],Z=(g[1],e.mode),D=void 0===Z?"ADD":Z,j=e.param,N=s.Z.useForm(),b=(0,r.Z)(N,1)[0],A=(0,o.useState)(!1),E=(0,r.Z)(A,2),U=E[0],k=E[1];(0,o.useEffect)((function(){if(D===y){console.log("is edit"),console.log("props",e);var t=j.id,n=x.filter((function(e){return e.id===parseInt(t)})),i=n[0];b.setFieldsValue({id:i.id,name:i.name,ip:i.ip,type:i.type,clientId:i.clientId})}}),[b,D,j,e]);return(0,T.jsx)(T.Fragment,{children:(0,T.jsxs)(s.Z,{layout:"vertical",form:b,name:"advanced_search",className:"ant-advanced-search-form",initialValues:{heightUnit:"cm",widthUnit:"cm",weightUnit:"kg"},children:[(0,T.jsx)(f.Z,{className:"border-bottom",overlap:!0,children:(0,T.jsx)("div",{className:"container",children:(0,T.jsxs)(p.Z,{className:"py-2",mobileFlex:!1,justifyContent:"space-between",alignItems:"center",children:[(0,T.jsxs)("h2",{className:"mb-3",children:["ADD"===D?"Add New Device":"Edit Device"," "]}),(0,T.jsxs)("div",{className:"mb-3",children:[(0,T.jsx)(l.ZP,{className:"mr-2",onClick:function(){b.setFieldsValue({name:"",ip:"",type:"",clientId:0})},children:"Discard"}),(0,T.jsx)(l.ZP,{type:"primary",onClick:function(){return k(!0),void b.validateFields().then((function(e){setTimeout((0,i.Z)(c().mark((function t(){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(k(!1),"ADD"!==D){t.next=4;break}return t.next=4,h.Z.add(e);case 4:if(D!==y){t.next=8;break}return t.next=7,h.Z.update(e);case 7:b.setFieldsValue({id:e.id,name:e.name,ip:e.ip,type:e.type,clientId:e.clientId});case 8:case"end":return t.stop()}}),t)}))),1500)})).catch((function(e){k(!1),console.log("info",e),d.ZP.error("Please enter all required fields:"+e)}))},htmlType:"submit",loading:U,children:"ADD"===D?"Add":"Save"})]})]})})}),(0,T.jsx)("div",{className:"container",children:(0,T.jsx)(u.Z,{defaultActiveKey:"1",style:{marginTop:30},items:[{label:"Device",key:"1",children:(0,T.jsx)(I,{})}]})})]})})}},1166:function(e,t,n){var i,r=n(168),a=n(9439),c=n(2791),s=n(364),d=n(2554),l=n(6443),u=n(4923);t.Z=function(e){var t=e.children,n=e.background,o=e.className,m=e.overlap,f=(0,c.useState)(0),p=(0,a.Z)(f,2),v=p[0],h=p[1],g=(0,c.useRef)(null),x=(0,s.v9)((function(e){return e.theme.navType})),Z=(0,s.v9)((function(e){return e.theme.currentTheme}));(0,c.useEffect)((function(){if(x===l.XA){var e=window.innerWidth,t=g.current.offsetWidth;h((e-t)/2)}}),[x]);return(0,u.tZ)("div",{ref:g,css:(0,d.iv)(i||(i=(0,r.Z)(["\n\t\t\t\tbackground-color: ",";\n\t\t\t\tpadding: ","px;\n\t\t\t\tmargin-top: -","px;\n\t\t\t\tmargin-left: -","px;\n\t\t\t\tmargin-right: -","px;\n\n\t\t\t\t@media "," {\n\t\t\t\t\tmargin-left: -","px;\n        \t\t\tmargin-right: -","px;\n\t\t\t\t}\n\n\t\t\t\t","\n\t\t\t"])),"dark"===Z?"#2f3a50":l.wx.WHITE,l.hv.LAYOUT_CONTENT_GUTTER,l.hv.LAYOUT_CONTENT_GUTTER,l.hv.LAYOUT_CONTENT_GUTTER,l.hv.LAYOUT_CONTENT_GUTTER,l.qk.MOBILE,l.hv.LAYOUT_CONTENT_GUTTER_SM,l.hv.LAYOUT_CONTENT_GUTTER_SM,m?"margin-bottom: -4.6875rem;":""),className:"page-header-alt ".concat(o||""),style:function(){var e={backgroundImage:n?"url(".concat(n,")"):"none"};return x===l.XA&&(e.marginRight=-v,e.marginLeft=-v,e.paddingLeft=0,e.paddingRight=0),e}(),children:x===l.XA?(0,u.tZ)("div",{className:"container",children:t}):(0,u.tZ)(u.HY,{children:t})})}},8470:function(e,t,n){var i=n(1413),r=n(225).Z.div((function(e){var t=e.justifyContent,n=e.alignItems,r=e.flexDirection,a=e.gap,c=e.padding,s=e.margin,d={display:"flex",justifyContent:t,alignItems:n,gap:"number"===typeof a?"".concat(a,"px"):a};return r&&(d.flexDirection=r),c&&(d.padding=c),s&&(d.margin=s),(0,i.Z)({},d)}));t.Z=r},8456:function(e,t,n){n.d(t,{Dz:function(){return c}});var i=n(4569),r=n.n(i),a=n(1933),c=function(){return(0,a.useQuery)("Devices",(function(){return r().get("/api/v1/Device/GetDevices").then((function(e){return e.data}))}))}},2626:function(e,t,n){var i=n(4569),r=n.n(i),a=n(3263),c={add:function(e){return r().post("/api/v1/device/AddDevice",e).then((function(t){return a.ZP.success("Added ".concat(e.name," to Device list")),t})).catch((function(e){a.ZP.error(e)}))},update:function(e){return r().put("/api/v1/device/UpdateDevice",e).then((function(t){return a.ZP.success("Updated ".concat(e.name," in Device list")),t})).catch((function(e){a.ZP.error(e)}))},delete:function(e,t){return r().get("/api/v1/device/DeleteDevice?id=".concat(e)).then((function(e){return a.ZP.success("Deleted Device ".concat(t," from Device list")),e})).catch((function(e){a.ZP.error(e)}))}};t.Z=c}}]);
//# sourceMappingURL=248.4b7f96c6.chunk.js.map